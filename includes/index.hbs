<!DOCTYPE html>
<html lang="en">

<head>
    <title>{{site_title}}</title>
    <meta charset="utf-8"/>
    <meta http-equiv="X-UA-Compatible" content="IE=edge"/>
    <meta name="robots" content="noindex, nofollow"/>
    <meta name="viewport" content="width=device-width, initial-scale=1"/>
    <link rel="shortcut icon" type="image/x-icon" href="favicon.ico"/>
    <link href="index.css" rel="stylesheet"/>
    <script type="text/javascript" id="MathJax-script" async
            src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/mml-chtml.js">
    </script>
</head>

<body>

<link href="https://cdn.lineicons.com/2.0/LineIcons.css" rel="stylesheet">
<section class="header-container">
    <div style="display:flex; justify-content:space-between; align-items:flex-end;">
        <div>
            <a href="https://github.com/AlongWY/ArxivDaily" style="text-decoration: none;">
                <div class="header-title">
                    <span class="header-title-preffix">AlongWY</span>//ArxivDaily
                </div>
            </a>
        </div>

        <div class=icons>
            <label class="theme-switch" for="checkbox">
                <input type="checkbox" id="checkbox"/>
                <i class="lni lni-32 lni-sun" rel="noopener noreferrer"></i>
            </label>
        </div>
    </div>
</section>

{{#each days}}
    <section class="day-container">
        <div class="date">{{date}}</div>

        {{#each channels}}
            <article>
                <details>
                    <Summary>
                        {{#each dublin_core_ext.subjects as |subject|}}
                            {{ subject }}
                        {{/each}}
                    </Summary>
                    <div class="details-content">
                        {{#each items}}
                            <article>
                                <details class="article-expander">
                                    <summary class="article-expander-title">
                                        {{highlight_title title dublin_core_ext.creators}}
                                    </summary>
                                    <div class="article-authors">
                                        {{highlight_author dublin_core_ext.creators}}
                                    </div>
                                    <a class="article-summary-link article-summary-box-outer" href="{{link}}">
                                        <div class="article-summary-box-inner">
                                            <span>{{latex_render description}}</span>
                                        </div>
                                    </a>
                                </details>
                            </article>
                        {{/each}}
                    </div>
                </details>
            </article>
        {{/each}}
    </section>
{{/each}}

</body>

<footer>
    <div>
        <time id="build-timestamp" datetime="{{build_time}}">
            <a href="https://github.com/AlongWY/ArxivDaily/actions">
                <img src="https://img.shields.io/github/workflow/status/alongwy/arxivdaily/Rss%20Feed?label={{build_time
                    "%F %T %Z"}}&style=for-the-badge"
                alt="{{build_time "%F %T %Z"}}">
            </a>
        </time>
    </div>
</footer>

<script>
    /* Exapand/Collapse with TAB key */
    var expanded = false;
    document.onkeydown = function (e) {
        if (e.keyCode === 9) {
            expanded = !expanded;
            document.querySelectorAll("details").forEach(detail => detail.open = expanded);
            return false;
        }
    };

    /* Switch Theme */
    const toggleSwitch = document.querySelector('.theme-switch input[type="checkbox"]');

    function switchTheme(e) {
        if (e.target.checked) {
            document.documentElement.setAttribute('data-theme', 'light');
            localStorage.setItem('theme', 'light'); //add this
        } else {
            document.documentElement.setAttribute('data-theme', 'dark');
            localStorage.setItem('theme', 'dark'); //add this
        }
    }

    toggleSwitch.addEventListener('change', switchTheme, false);
    const currentTheme = localStorage.getItem('theme') ? localStorage.getItem('theme') : null;
    if (currentTheme) {
        document.documentElement.setAttribute('data-theme', currentTheme);
        if (currentTheme === 'light') {
            toggleSwitch.checked = true;
        }
    }
</script>

</html>
